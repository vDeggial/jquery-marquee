!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.fn.marquee=function(n){return this.each(function(){var t=e.extend({},e.fn.marquee.defaults,n),i={container:{element:null,width:0,height:0},outerWrapper:{element:null,width:0,height:0,animationCss:""},innerWrapper:{element:null,width:0,height:0},animation:{css:"",loopCounter:3,cssPlayState:"animation-play-state",cssAnimationSupport:!1,cssAnimationName:"",cssAnimationString:"animation",cssKeyframeString:""},isVertical:!1};i.container.element=e(this);var a,r={pause:function(){i.animation.cssAnimationSupport&&t.allowCss3Support?i.outerWrapper.element.css(i.animation.cssPlayState,"paused"):e.fn.pause&&i.outerWrapper.element.pause(),i.container.element.data("runningStatus","paused"),i.container.element.trigger("paused")},resume:function(){i.animation.cssAnimationSupport&&t.allowCss3Support?i.outerWrapper.element.css(i.animation.cssPlayState,"running"):e.fn.resume&&i.outerWrapper.element.resume(),i.container.element.data("runningStatus","resumed"),i.container.element.trigger("resumed")},toggle:function(){r["resumed"===i.container.element.data("runningStatus")?"pause":"resume"]()},destroy:function(){clearTimeout(i.container.element.timer),i.container.element.find("*").addBack().off(),i.container.element.html(i.container.element.find(".js-marquee:first").html())}};function o(e,n,t){for(var i=["webkit","moz","MS","o",""],a=0;a<i.length;a++)i[parseInt(a,10)]||(n=n.toLowerCase()),e.addEventListener(i[parseInt(a,10)]+n,t,!1)}function s(e,n,t,i){t=t||"",i=i||"";var a={property:"",value:""};return a.property=e,n=t.concat(n,i),a.value=n,a}function p(e,n){n=n||!1;var t=i.animation.cssAnimationSupport?s("transform",e,n?"translateY(":"translateX(",")"):s(n?"margin-top":"margin-left",e),a=t.property;e=t.value;var r={};return r[a]=e,r}function c(e,n,t){t=t||!1;var a=i.animation.cssAnimationSupport?s("transform",n,t?"translateY(":"translateX(",")"):s(t?"margin-top":"margin-left",n);e.css(a.property,a.value)}function m(){i.animation.css&&(i.animation.cssAnimationName=i.animation.cssAnimationName+"0",i.animation.cssKeyframeString=e.trim(i.animation.cssKeyframeString)+"0 ",i.animation.css=i.animation.cssAnimationName+" "+t.duration/1e3+"s 0s infinite "+t.css3easing)}function u(){i.animation.css&&(i.animation.css=i.animation.cssAnimationName+" "+t.duration/1e3+"s "+t.delayBeforeStart/1e3+"s "+t.css3easing)}function l(){t.duration=t._completeDuration,m()}function d(){c(i.outerWrapper.element,"up"===t.direction?i.container.height+"px":"-"+i.innerWrapper.height+"px",!0)}function h(){c(i.outerWrapper.element,"left"===t.direction?i.container.width+"px":"-"+i.innerWrapper.width+"px")}function f(){switch(t.duplicated){case!0:1===i.animation.loopCounter?(t._originalDuration=t.duration,i.isVertical?t.duration="up"===t.direction?t.duration+i.container.height/(i.innerWrapper.height/t.duration):2*t.duration:t.duration="left"===t.direction?t.duration+i.container.width/(i.innerWrapper.width/t.duration):2*t.duration,i.animation.css&&(i.animation.css=i.animation.cssAnimationName+" "+t.duration/1e3+"s "+t.delayBeforeStart/1e3+"s "+t.css3easing),i.animation.loopCounter++):2===i.animation.loopCounter&&(t.duration=t._originalDuration,m(),i.animation.loopCounter++)}}function g(){switch(f(),i.isVertical){case!0:!function(){switch(!0){case t.duplicated:i.animation.loopCounter>2&&c(i.outerWrapper.element,"up"===t.direction?0:"-"+i.innerWrapper.height+"px",!0),i.outerWrapper.animationCss=p("up"===t.direction?"-"+i.innerWrapper.height+"px":0,!0);break;case t.startVisible:switch(i.animation.loopCounter){case 2:u(),i.outerWrapper.animationCss=p("up"===t.direction?"-"+i.innerWrapper.height+"px":i.container.height+"px",!0),i.animation.loopCounter++;break;case 3:l(),d()}break;default:d(),i.outerWrapper.animationCss=p("up"===t.direction?"-"+i.outerWrapper.element.height()+"px":i.container.height+"px",!0)}}();break;default:!function(){switch(!0){case t.duplicated:i.animation.loopCounter>2&&c(i.outerWrapper.element,"left"===t.direction?0:"-"+i.innerWrapper.width+"px"),i.outerWrapper.animationCss=p("left"===t.direction?"-"+i.innerWrapper.width+"px":0);break;case t.startVisible:switch(t.duration=t._originalDuration,i.animation.loopCounter){case 2:u(),i.outerWrapper.animationCss=p("left"===t.direction?"-"+i.innerWrapper.width+"px":i.container.width+"px"),i.animation.loopCounter++;break;case 3:l(),h()}break;default:h(),i.outerWrapper.animationCss=p("left"===t.direction?"-"+i.innerWrapper.width+"px":i.container.width+"px")}}()}}function W(){i.outerWrapper.element.css(i.animation.cssAnimationString,i.animation.css);var n,t=i.animation.cssKeyframeString+" { 100%  "+(n=i.outerWrapper.animationCss,JSON.stringify(n).replace(/\"/g,""))+"}",a=i.outerWrapper.element.find("style");0!==a.length?a.filter(":last").html(t):e("head").append("<style>"+t+"</style>"),o(i.outerWrapper.element[0],"AnimationIteration",function(){i.container.element.trigger("finished")}),o(i.outerWrapper.element[0],"AnimationEnd",function(){S(),i.container.element.trigger("finished")})}function w(){switch(i.animation.cssAnimationSupport){case!0:W();break;default:i.outerWrapper.element.animate(i.outerWrapper.animationCss,t.duration,t.easing,function(){i.container.element.trigger("finished"),t.pauseOnCycle?y():S()})}}function S(){g(),i.container.element.trigger("beforeStarting"),w(),i.container.element.data("runningStatus","resumed")}function y(){i.container.element.timer=setTimeout(S,t.delayBeforeStart)}function A(){switch(i.isVertical){case!0:!function(){switch(i.container.height=i.container.element.height(),i.outerWrapper.element.removeAttr("style"),i.container.element.height(i.container.height),i.container.element.find(".js-marquee").css({float:"none","margin-bottom":t.gap,"margin-right":0}),t.duplicated){case!0:i.container.element.find(".js-marquee:last").css({"margin-bottom":0})}switch(i.innerWrapper.height=i.container.element.find(".js-marquee:first").height()+t.gap,t.startVisible&&!t.duplicated){case!0:t._completeDuration=(parseInt(i.innerWrapper.height,10)+parseInt(i.container.height,10))/parseInt(i.container.height,10)*t.duration,t.duration=parseInt(i.innerWrapper.height,10)/parseInt(i.container.height,10)*t.duration;break;case!1:t.duration=(parseInt(i.innerWrapper.height,10)+parseInt(i.container.height,10))/parseInt(i.container.height,10)*t.duration}}();break;case!1:!function(){switch(i.innerWrapper.width=i.container.element.find(".js-marquee:first").width()+t.gap,i.container.width=i.container.element.width(),t.startVisible&&!t.duplicated){case!0:t._completeDuration=(parseInt(i.innerWrapper.width,10)+parseInt(i.container.width,10))/parseInt(i.container.width,10)*t.duration,t.duration=parseInt(i.innerWrapper.width,10)/parseInt(i.container.width,10)*t.duration;break;case!1:t.duration=(parseInt(i.innerWrapper.width,10)+parseInt(i.container.width,10))/parseInt(i.container.width,10)*t.duration}}()}}function C(){var n;i.outerWrapper.width=(n=0,i.container.element.children().first().children().each(function(){n+=e(this).outerWidth(!0)}),n),i.outerWrapper.width+=i.container.element.width()+1e3,t.duplicated&&(i.outerWrapper.width*=2),i.container.element.wrapInner("<div class='js-marquee-wrapper'></div>"),i.outerWrapper.element=i.container.element.find(".js-marquee-wrapper"),i.outerWrapper.element.css("will-change","transform"),i.outerWrapper.element.css("width",i.outerWrapper.width+"px")}function b(){i.container.element.wrapInner("<div class='js-marquee'></div>"),i.innerWrapper.element=i.container.element.find(".js-marquee"),i.innerWrapper.element.css({"margin-right":t.gap,float:"left"}),t.duplicated&&i.innerWrapper.element.clone(!0).appendTo(i.container.element),C()}("string"!=typeof n||(e.isFunction(r[n])&&(i.outerWrapper.element||(i.outerWrapper.element=i.container.element.find(".js-marquee-wrapper")),!0===i.container.element.data("css3AnimationIsSupported")&&(i.animation.cssAnimationSupport=!0),r[n]()),0))&&(e.each(t,function(e){if(void 0!==(a=i.container.element.attr("data-"+e))){switch(a){case"true":a=!0;break;case"false":a=!1}t[e]=a}}),t.speed&&(t.duration=parseInt(i.container.element.width(),10)/t.speed*1e3),i.isVertical="up"===t.direction||"down"===t.direction,t.gap=t.duplicated?parseInt(t.gap,10):0,b(),A(),t.duplicated&&(t.duration=t.duration/2),function(){if(t.allowCss3Support){var e=document.body||document.createElement("div");i.animation.cssAnimationName="marqueeAnimation-"+Math.floor(1e4*Math.random());var n="Webkit Moz O ms Khtml".split(" ");if(void 0!==e.style.animation&&(i.animation.cssKeyframeString="@keyframes "+i.animation.cssAnimationName+" ",i.animation.cssAnimationSupport=!0),!1===i.animation.cssAnimationSupport)for(var a=0;a<n.length;a++)if(void 0!==e.style[n[parseInt(a,10)]+"marquee.animation.cssAnimationName"]){var r="-"+n[parseInt(a,10)].toLowerCase()+"-";i.animation.cssAnimationString=r+i.animation.cssAnimationString,i.animation.cssPlayState=r+i.animation.cssPlayState,i.animation.cssKeyframeString="@"+r+"keyframes "+i.animation.cssAnimationName+" ",i.animation.cssAnimationSupport=!0;break}i.animation.cssAnimationSupport&&(i.animation.css=i.animation.cssAnimationName+" "+t.duration/1e3+"s "+t.delayBeforeStart/1e3+"s infinite "+t.css3easing,i.container.element.data("css3AnimationIsSupported",!0))}}(),function(){switch(!0){case t.duplicated:switch(i.isVertical){case!0:t.startVisible?c(i.outerWrapper.element,0,!0):c(i.outerWrapper.element,"up"===t.direction?i.container.height+"px":"-"+(2*i.innerWrapper.height-t.gap)+"px",!0);break;default:t.startVisible?c(i.outerWrapper.element,0):c(i.outerWrapper.element,"left"===t.direction?i.container.width+"px":"-"+(2*i.innerWrapper.width-t.gap)+"px")}i.animation.loopCounter=t.startVisible?i.animation.loopCounter:1;break;case t.startVisible:i.animation.loopCounter=2;break;default:i.isVertical?d():h()}}(),i.container.element.on({pause:r.pause,resume:r.resume}),t.pauseOnHover&&i.container.element.on({mouseenter:r.pause,mouseleave:r.resume}),i.animation.cssAnimationSupport&&t.allowCss3Support?S():y())})},e.fn.marquee.defaults={allowCss3Support:!0,css3easing:"linear",easing:"linear",delayBeforeStart:1e3,direction:"left",duplicated:!1,duration:5e3,speed:0,gap:20,pauseOnCycle:!1,pauseOnHover:!1,startVisible:!1}});
